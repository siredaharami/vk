import asyncio
from pyrogram import Client
from pyrogram.types import (
    InlineQuery,
    InlineQueryResultPhoto,
    InlineQueryResultArticle,
    InputTextMessageContent,
    InlineKeyboardMarkup,
)
from CakeMusic.modules.buttons import paginate_plugins
from CakeMusic.modules.wrapper import inline_wrapper

# Initialize bot and required variables
bot = Client("my_bot")  # Replace "my_bot" with your session name
plugs = []  # Replace with your plugins list
__version__ = "1.0.0"  # Replace with your bot's version


async def help_menu_logo(answer):
    thumb_image = "https://telegra.ph/file/3063af27d9cc8580845e1.jpg"
    button = paginate_plugins(0, plugs, "help")
    answer.append(
        InlineQueryResultPhoto(
            photo_url=thumb_image,
            title="üí´  ú·¥á ü·¥ò ·¥ç·¥á…¥·¥ú ‚ú®",
            thumb_url=thumb_image,
            description="ü•Ä Open Help Menu Of PBXUSERBOT ‚ú®...",
            caption=f"""
**üí´ ·¥°·¥á ü·¥Ñ·¥è·¥ç·¥á ·¥õ·¥è  ú·¥á ü·¥ò ·¥ç·¥á…¥·¥ú ·¥è·¥ò.
·¥ò ôx ·¥ús·¥á Ä ô·¥è·¥õ  ¬ª {__version__} ‚ú®

‚ù§Ô∏è·¥Ñ ü…™·¥Ñ·¥ã ·¥è…¥  ô·¥á ü·¥è·¥°  ô·¥ú·¥õ·¥õ·¥è…¥s ·¥õ·¥è
…¢·¥á·¥õ ·¥ús·¥á Ä ô·¥è·¥õ ·¥Ñ·¥è·¥ç·¥ç·¥Ä…¥·¥Ös ‚ù§Ô∏è

üåπ·¥ò·¥è·¥°·¥á Ä·¥á·¥Ö  ô è ‚òÜ [·¥ò ôx ·¥ú·¥ò·¥Ö·¥Ä·¥õ·¥á](https://t.me/HEROKUBIN_01) üåπ**
            """,
            reply_markup=InlineKeyboardMarkup(button),
        )
    )
    return answer


async def help_menu_text(answer):
    button = paginate_plugins(0, plugs, "help")
    answer.append(
        InlineQueryResultArticle(
            title="üí´  ú·¥á ü·¥ò ·¥ç·¥á…¥·¥ú ‚ú®",
            input_message_content=InputTextMessageContent(
                f"""
**üí´ ·¥°·¥á ü·¥Ñ·¥è·¥ç·¥á ·¥õ·¥è  ú·¥á ü·¥ò ·¥ç·¥á…¥·¥ú ·¥è·¥ò.
·¥ò ôx ·¥ús·¥á Ä ô·¥è·¥õ  ¬ª {__version__} ‚ú®

‚ù§Ô∏è·¥Ñ ü…™·¥Ñ·¥ã ·¥è…¥  ô·¥á ü·¥è·¥°  ô·¥ú·¥õ·¥õ·¥è…¥s ·¥õ·¥è
…¢·¥á·¥õ ·¥ús·¥á Ä ô·¥è·¥õ ·¥Ñ·¥è·¥ç·¥ç·¥Ä…¥·¥Ös ‚ù§Ô∏è

üåπ·¥ò·¥è·¥°·¥á Ä·¥á·¥Ö  ô è ‚òÜ [·¥ò ôx ·¥ú·¥ò·¥Ö·¥Ä·¥õ·¥á](https://t.me/HEROKUBIN_01) üåπ**
                """,
                disable_web_page_preview=True,
            ),
            reply_markup=InlineKeyboardMarkup(button),
        )
    )
    return answer


@bot.on_inline_query()
@inline_wrapper
async def inline_query_handler(bot, query: InlineQuery):
    text = query.query
    answer = []
    if text.startswith("help_menu_logo"):
        answer = await help_menu_logo(answer)
    elif text.startswith("help_menu_text"):
        answer = await help_menu_text(answer)

    if answer:
        try:
            await bot.answer_inline_query(query.id, results=answer, cache_time=10)
        except Exception as e:
            print(f"Error: {e}")
